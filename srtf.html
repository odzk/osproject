<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E=" crossorigin="anonymous"></script>    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <title>Sample Algorithms</title>
  </head>
  <body>

<div class="container-fluid mt-5">
<div class="row">
<div class="col-sm-4 mt-5">
<div class="col-md-12 text-center mt-3 shadow p-3">
  <a href="index.html" class="btn btn-info btn-sm">FCFS Algorithm</a>
  <a href="index.html" class="btn btn-success btn-sm">SPF Algorithm</a>
</div>

<div class="col-md-12 text-center mt-3 shadow p-3">
  <button class="btn btn-danger btn-sm">SRTF Algorithm</button>
  <button class="btn btn-primary btn-sm">RR Algorithm</button>
</div>

<div class="col-md-12 text-center mt-3 shadow p-3">
  <button class="btn btn-secondary btn-sm">Priority Scheduling Algorithm</button>
</div>

</div>

<div class="col-sm-6">
  <div class="card mt-3 shadow">
  <div class="card-header">
    SRTF Input Process Time <button class="btn btn-sm btn-info float-right" data-toggle="modal" data-target="#about">About</button>
   </div>

<div class="card-body">
<table class="table table-sm table-bordered table-hover">

<tr class="d-flex text-center">
  <th class="col-4"></th>
  <th class="col-4">Burst Time (ms)</th>
  <th class="col-4">Arrival Time (ms)</th>
</tr>
<tr class="d-flex text-center">
  <td class="col-4 text-center">(P1)</td>
  <td class="col-4"><input type='text' class='form-control form-control-sm' id="p1_bt" value="21" readonly=""></td>
  <td class="col-4"><input type='text' class='form-control form-control-sm' id="p1_at" value="0" readonly=""></td>
</tr>

<tr class="d-flex text-center">
  <td class="col-4 text-center">(P2)</td>
  <td class="col-4"><input type='text' class='form-control form-control-sm' id="p2_bt" value="3" readonly=""></td>
  <td class="col-4"><input type='text' class='form-control form-control-sm' id="p2_at" value="1" readonly=""></td>
</tr>

<tr class="d-flex text-center">
  <td class="col-4 text-center">(P3)</td>
  <td class="col-4"><input type='text' class='form-control form-control-sm' id="p3_bt" value="6" readonly=""></td>
  <td class="col-4"><input type='text' class='form-control form-control-sm' id="p3_at" value="2" readonly=""></td>
</tr>

<tr class="d-flex text-center">
  <td class="col-4 text-center">(P4)</td>
  <td class="col-4"><input type='text' class='form-control form-control-sm' id="p4_bt" value="2" readonly=""></td>
  <td class="col-4"><input type='text' class='form-control form-control-sm' id="p4_at" value="3" readonly=""></td>
</tr>
</table>

<div class="col-md-12 text-center">
  <button class="btn btn-info btn-sm" onclick="SRTF()">SRTF Algorithm</button>
<!--   <button class="btn btn-success btn-sm" onclick="SPF()">SPF Algorithm</button>
 --></div>
</div>

  <div class="card mt-4 shadow">
  <div class="card-header">
    Output Executing: <span id="totalWatingTime"></span>
   </div>
  <div class="card-body">
  <div class="progress">
    <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 25%; display: none;" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100" id="p1Progress"><span id="firstProcess"></span></div>
    <div class="progress-bar bg-success progress-bar-striped progress-bar-animated" role="progressbar" style="width: 25%; display: none;" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100" id="p2Progress"><span id="secondProcess"></span></div>
    <div class="progress-bar bg-info progress-bar-striped progress-bar-animated" role="progressbar" style="width: 25%; display: none;" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" id="p3Progress"><span id="thirdProcess"></span></div>
    <div class="progress-bar bg-danger progress-bar-striped progress-bar-animated" role="progressbar" style="width: 25%; display: none;" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" id="p4Progress"><span id="fourthProcess"></span></div>
    <div class="progress-bar bg-success progress-bar-striped progress-bar-animated" role="progressbar" style="width: 25%; display: none;" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" id="remaining1"><span id="remaining1"></span></div>
    <div class="progress-bar bg-info progress-bar-striped progress-bar-animated" role="progressbar" style="width: 25%; display: none;" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" id="remaining2"><span id="remaining2"></span></div>
    <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 25%; display: none;" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" id="remaining3"><span id="remaining3"></span></div>
</div>
  </div>
</div>
</div><!-- end of container -->
</div>  
  </body>  

<!-- Modal -->
<div class="modal fade" id="about" tabindex="-1" role="dialog" aria-labelledby="about" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="about">About</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body text-center">
      <p>OS Project Algorithm Sample v0.9</p>
      <p>Submitted by: Odysseus Ambut</p>
      <p>Submiited to: Godwin Monserate</p>
      <p>Github: https://github.com/odzk/</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">

//Get the Values from Input

//First Come First Serve Algorithm
function SRTF() {

var p1BurstTime = $('#p1_bt').val();
var p2BurstTime = $('#p2_bt').val();
var p3BurstTime = $('#p3_bt').val();
var p4BurstTime = $('#p4_bt').val();

var p1ArrivalTime = $('#p1_at').val();
var p2ArrivalTime = $('#p2_at').val();
var p3ArrivalTime = $('#p3_at').val();
var p4ArrivalTime = $('#p4_at').val();

//create object pairs for each processes

var allProcessObj = { 
      p1 : { name: 'P1', burst_time: p1BurstTime, arrival_time : p1ArrivalTime }, 
      p2 : { name: 'P2', burst_time: p2BurstTime, arrival_time : p2ArrivalTime },
      p3 : { name: 'P3', burst_time: p3BurstTime, arrival_time : p3ArrivalTime },
      p4 : { name: 'P4', burst_time: p4BurstTime, arrival_time : p4ArrivalTime },
    };


//get the least burst time for sorting


allBurstTime = new Array();
allArrivalTime = new Array();

// var allBurstTime = [p1BurstTime, p2BurstTime, p3BurstTime, p4BurstTime];
// var allArrivalTime = [p1ArrivalTime, p2ArrivalTime, p3ArrivalTime, p4ArrivalTime];
// var sortValuesBurst = allBurstTime.sort((function (a, b) {  return a - b;  }));
// var firstValueBurst = sortValuesBurst[0];
// var secondValueBurst = sortValuesBurst[1];
// var thirdValueBurst = sortValuesBurst[2];
// var fourthValueBurst = sortValuesBurst[3];

var sortValuesArrival = allArrivalTime.sort((function (a, b) {  return a - b;  }));
var firstValueArrival = sortValuesArrival[0];
var secondValueArrival = sortValuesArrival[1];
var thirdValueArrival = sortValuesArrival[2];
var fourthValueArrival = sortValuesArrival[3];

//compare the values in Process

//solve for arrival time:
firstArrivalTime = 0;
secondArrivalTime = 0;
thirdArrivalTime = 0;
fourthArrivalTime = 0;

allBurstTime = Number(p1BurstTime) + Number(p2BurstTime) + Number(p3BurstTime) + Number(p4BurstTime);
var firstBar = (Number(p1BurstTime) / Number(allBurstTime) * 100);
var secondBar = (Number(p2BurstTime) / Number(allBurstTime) * 100);
var thirdBar = (Number(p3BurstTime) / Number(allBurstTime) * 100);
var fourthBar = (Number(p4BurstTime) / Number(allBurstTime) * 100);


var i = 1;
while(i <= allProcessObj.p2.arrival_time) {
    $('#firstProcess').text('P1 - 1 ms' );
    $('#p1Progress').attr('aria-valuenow', ((p2ArrivalTime / allBurstTime)*100)).css( {'width' : ((p2ArrivalTime / allBurstTime)*100) + '%', 'display' : 'block' } );
    p1BurstTime = p1BurstTime - i;
    i++;
}

while (i <= allProcessObj.p3.arrival_time) {
      $('#secondProcess').text('P2 - 1 ms');
      $('#p2Progress').attr('aria-valuenow', (((p3ArrivalTime - p2ArrivalTime) / allBurstTime)*100)).css( {'width' : (((p3ArrivalTime - p2ArrivalTime) / allBurstTime)*100) + '%', 'display' : 'block' } );
    p2BurstTime = p2BurstTime - p2ArrivalTime;  
    i++;
}

while (i <= allProcessObj.p4.arrival_time) {
      $('#thirdProcess').text('P3 - 1 ms');
      $('#p3Progress').attr('aria-valuenow', (((p4ArrivalTime - p3ArrivalTime) / allBurstTime)*100)).css( {'width' : (((p4ArrivalTime - p3ArrivalTime) / allBurstTime)*100) + '%', 'display' : 'block' } );
      p3BurstTime = p3BurstTime - (p3ArrivalTime - p2ArrivalTime);
      i++;
    }

      $('#fourthProcess').text('P4 - 2 ms');
      $('#p4Progress').attr('aria-valuenow', fourthBar).css( {'width' : fourthBar + '%', 'display' : 'block' } );
      p4BurstTime = p3BurstTime - (p4ArrivalTime - p3ArrivalTime);


    $('#remaining1').text('P2 - 2 ms');
      $('#remaining1').attr('aria-valuenow', ((2/allBurstTime)*100)).css( {'width' : ((2/allBurstTime)*100) + '%', 'display' : 'block' } );
      p4BurstTime = p3BurstTime - (p4ArrivalTime - p3ArrivalTime);

    $('#remaining2').text('P3 - 5 ms');
      $('#remaining2').attr('aria-valuenow', ((5/allBurstTime)*100)).css( {'width' : ((5/allBurstTime)*100) + '%', 'display' : 'block' } );
      p4BurstTime = p3BurstTime - (p4ArrivalTime - p3ArrivalTime);

    $('#remaining3').text('P4 - 20ms');
      $('#remaining3').attr('aria-valuenow', ((20/allBurstTime)*100)).css( {'width' : ((20/allBurstTime)*100) + '%', 'display' : 'block' } );
      p4BurstTime = p3BurstTime - (p4ArrivalTime - p3ArrivalTime);


// console.log(p1BurstTime);
// console.log(p2BurstTime);

// if (firstValueArrival == p1ArrivalTime) {
//    firstProcess').text('P1');
//   var firstArrivalTime = 0;
// } else if (firstValue == p2BurstTime) {
//   $('#firstProcess').text('P2');
//   var firstArrivalTime = 0;
// } else if (firstValue == p3BurstTime) {
//   $('#firstProcess').text('P3');
//   var firstArrivalTime = 0;
// } else {
//   $('#firstProcess').text('P4');
//   var firstArrivalTime = 0;
// }

// if (secondValue == p1BurstTime) {
//   $('#secondProcess').text('P1');
//   secondArrivalTime = firstArrivalTime + Number(firstValue);
// } else if (secondValue == p2BurstTime) {
//   $('#secondProcess').text('P2');
//   secondArrivalTime = firstArrivalTime + Number(firstValue);
// } else if (secondValue == p3BurstTime) {
//   $('#secondProcess').text('P3');
//   secondArrivalTime = firstArrivalTime + Number(firstValue);
// } else {
//   $('#secondProcess').text('P4');
//   secondArrivalTime = firstArrivalTime + Number(firstValue);
// }


// if (thirdValue == p1BurstTime) {
//   $('#thirdProcess').text('P1');
//   thirdArrivalTime = secondArrivalTime + Number(secondValue);
// } else if (thirdValue == p2BurstTime) {
//   $('#thirdProcess').text('P2');
//   thirdArrivalTime = secondArrivalTime + Number(secondValue);
// } else if (thirdValue == p3BurstTime) {
//   $('#thirdProcess').text('P3');
//   thirdArrivalTime = secondArrivalTime + Number(secondValue);
// } else {
//   $('#thirdProcess').text('P4');
//   thirdArrivalTime = secondArrivalTime + Number(secondValue);
// }


// if (fourthValue == p1BurstTime) {
//   $('#fourthProcess').text('P1');
//   fourthArrivalTime = thirdArrivalTime + Number(thirdValue);
// } else if (fourthValue == p2BurstTime) {
//   $('#fourthProcess').text('P2');
//   fourthArrivalTime = thirdArrivalTime + Number(thirdValue);
// } else if (fourthValue == p3BurstTime) {
//   $('#fourthProcess').text('P3');
//   fourthArrivalTime = thirdArrivalTime + Number(thirdValue);
// } else {
//   $('#fourthProcess').text('P4');
//   fourthArrivalTime = thirdArrivalTime + Number(thirdValue);
// }


// var getTotalBurstTime = (Number(p1BurstTime) + Number(p2BurstTime) + Number(p3BurstTime) + Number(p4BurstTime));
// var firstBar = (Number(p1BurstTime) / Number(getTotalBurstTime) * 100);
// var secondBar = (Number(p2BurstTime) / Number(getTotalBurstTime) * 100);
// var thirdBar = (Number(p3BurstTime) / Number(getTotalBurstTime) * 100);
// var fourthBar = (Number(p4BurstTime) / Number(getTotalBurstTime) * 100);


// for (var i = 0; i <= firstBar; i++) {
//   $('#p1Progress').attr('aria-valuenow', i).css( {'width' : i + '%', 'display' : 'block' } );
// } 


// for (var i = 0; i <= secondBar; i++) {
//   $('#p2Progress').attr('aria-valuenow', i).css( { 'width' : i + '%', 'display' : 'block' } );
// } 


// for (var i = 0; i <= thirdBar; i++) {
//   $('#p3Progress').attr('aria-valuenow', i).css( { 'width' : i + '%', 'display' : 'block' } );
// }

// for (var i = 0; i <= fourthBar; i++) {
// $('#p4Progress').attr('aria-valuenow', i).css( {'width' : i + '%', 'display' : 'block' } );
// }

var p1 = { burst_time :  Number(p1BurstTime), arrival_time : 0 };
var p2 = { burst_time :  Number(p2BurstTime), arrival_time : p1.burst_time };
var p3 = { burst_time :  Number(p3BurstTime), arrival_time : p2.arrival_time + p2.burst_time };
var p4 = { burst_time :  Number(p4BurstTime), arrival_time : p3.arrival_time + p3.burst_time };

var ave_waiting_time = ( (((Number(allProcessObj.p4.arrival_time) + Number(allProcessObj.p3.arrival_time)) - 1)) + ((Number(allProcessObj.p4.arrival_time) + Number(allProcessObj.p3.arrival_time) + Number(allProcessObj.p4.burst_time)) - 1) + ((Number(allProcessObj.p2.arrival_time) + Number(allProcessObj.p3.arrival_time) + Number(allProcessObj.p4.arrival_time) + Number(allProcessObj.p3.burst_time)) - 1 ) / 4);

$('#totalWatingTime').text(ave_waiting_time + ' ms');

}

// Shortest Path Algorithm

function SPF() {

//get all values and put into array

var p1BurstTime = $('#p1').val();
var p2BurstTime = $('#p2').val();
var p3BurstTime = $('#p3').val();
var p4BurstTime = $('#p4').val();

for (var i = 0; i <= firstBar; i++) {
  $('#p1Progress').attr('aria-valuenow', i).css( {'width' : i + '%', 'display' : 'block' } );
} 


for (var i = 0; i <= secondBar; i++) {
  $('#p2Progress').attr('aria-valuenow', i).css( { 'width' : i + '%', 'display' : 'block' } );
} 


for (var i = 0; i <= thirdBar; i++) {
  $('#p3Progress').attr('aria-valuenow', i).css( { 'width' : i + '%', 'display' : 'block' } );
}

for (var i = 0; i <= fourthBar; i++) {
$('#p4Progress').attr('aria-valuenow', i).css( {'width' : i + '%', 'display' : 'block' } );
}

allValues = new Array();

var allValues = [p1BurstTime, p2BurstTime, p3BurstTime, p4BurstTime];
var sortValues = allValues.sort((function (a, b) {  return a - b;  }));
var firstValue = sortValues[0];
var secondValue = sortValues[1];
var thirdValue = sortValues[2];
var fourthValue = sortValues[3];

//compare the values in Process

//solve for arrival time:
firstArrivalTime = 0;
secondArrivalTime = 0;
thirdArrivalTime = 0;
fourthArrivalTime = 0;

if (firstValue == p1BurstTime) {
  $('#firstProcess').text('P1');
  var firstArrivalTime = 0;
} else if (firstValue == p2BurstTime) {
  $('#firstProcess').text('P2');
  var firstArrivalTime = 0;
} else if (firstValue == p3BurstTime) {
  $('#firstProcess').text('P3');
  var firstArrivalTime = 0;
} else {
  $('#firstProcess').text('P4');
  var firstArrivalTime = 0;
}

if (secondValue == p1BurstTime) {
  $('#secondProcess').text('P1');
  secondArrivalTime = firstArrivalTime + Number(firstValue);
} else if (secondValue == p2BurstTime) {
  $('#secondProcess').text('P2');
  secondArrivalTime = firstArrivalTime + Number(firstValue);
} else if (secondValue == p3BurstTime) {
  $('#secondProcess').text('P3');
  secondArrivalTime = firstArrivalTime + Number(firstValue);
} else {
  $('#secondProcess').text('P4');
  secondArrivalTime = firstArrivalTime + Number(firstValue);
}


if (thirdValue == p1BurstTime) {
  $('#thirdProcess').text('P1');
  thirdArrivalTime = secondArrivalTime + Number(secondValue);
} else if (thirdValue == p2BurstTime) {
  $('#thirdProcess').text('P2');
  thirdArrivalTime = secondArrivalTime + Number(secondValue);
} else if (thirdValue == p3BurstTime) {
  $('#thirdProcess').text('P3');
  thirdArrivalTime = secondArrivalTime + Number(secondValue);
} else {
  $('#thirdProcess').text('P4');
  thirdArrivalTime = secondArrivalTime + Number(secondValue);
}


if (fourthValue == p1BurstTime) {
  $('#fourthProcess').text('P1');
  fourthArrivalTime = thirdArrivalTime + Number(thirdValue);
} else if (fourthValue == p2BurstTime) {
  $('#fourthProcess').text('P2');
  fourthArrivalTime = thirdArrivalTime + Number(thirdValue);
} else if (fourthValue == p3BurstTime) {
  $('#fourthProcess').text('P3');
  fourthArrivalTime = thirdArrivalTime + Number(thirdValue);
} else {
  $('#fourthProcess').text('P4');
  fourthArrivalTime = thirdArrivalTime + Number(thirdValue);
}

var getTotalBurstTime = Number(firstValue) + Number(secondValue) + Number(thirdValue) + Number(fourthValue);
var firstBar = (Number(firstValue) / Number(getTotalBurstTime) * 100);
var secondBar = (Number(secondValue) / Number(getTotalBurstTime) * 100);
var thirdBar = (Number(thirdValue) / Number(getTotalBurstTime) * 100);
var fourthBar = (Number(fourthValue) / Number(getTotalBurstTime) * 100);

for (var i = 0; i <= firstBar; i++) {
  $('#p1Progress').attr('aria-valuenow', i).css( {'width' : i + '%', 'display' : 'block' } );
} 


for (var i = 0; i <= secondBar; i++) {
  $('#p2Progress').attr('aria-valuenow', i).css( { 'width' : i + '%', 'display' : 'block' } );
} 


for (var i = 0; i <= thirdBar; i++) {
  $('#p3Progress').attr('aria-valuenow', i).css( { 'width' : i + '%', 'display' : 'block' } );
}

for (var i = 0; i <= fourthBar; i++) {
$('#p4Progress').attr('aria-valuenow', i).css( {'width' : i + '%', 'display' : 'block' } );
}

console.log(firstArrivalTime);
console.log(secondArrivalTime);
console.log(thirdArrivalTime);
console.log(fourthArrivalTime);
var ave_waiting_time = (firstArrivalTime + secondArrivalTime + thirdArrivalTime + fourthArrivalTime) / 4;

$('#totalWatingTime').text(ave_waiting_time + ' ms');

}

</script>

</html>